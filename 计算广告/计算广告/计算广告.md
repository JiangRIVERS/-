# 计算广告
## 书籍概况
+ 作者：刘鹏 王超
+ 第 2 版
## 读书笔记
## 第1章 在线广告综述
1. 在线广告，也称网络广告、互联网广告，顾名思义，指的是在线媒体上投放的广告。与传统广告不同的是，在线广告在其短短十几年的发展过程中，已经形成了以人群为投放目标、以产品为导向的技术型投放模式。它不仅为广告主带来了以准确接触目标受众为方法论的全新营销渠道，也为互联网免费产品和媒体找到了规模化变现的手段。可以说，不论在做用户产品还是商业产品，不深入了解在线广告，就不可能全面了解互联网业务。因此，互联网行业的从业者花一些时间把现代在线广告原理和产品搞清楚是必需的
2. 计算广告仍然是大数据应用中最成熟、市场规模最大的行业
3. 本章将从两个方面来探讨：一是其内涵，即在线广告这种商业活动的定义与目的；二是其外延，即在线广告发展历史中产生的关键产品形态；另外，本章还有另外一个目的，就是尽可能集中地介绍互联网广告的产品和技术术语，以方便后面的讨论
4. 与线下广告相比，在线广告的产品和创意形式由于互联网媒体在形态、交互方式等方面存在差异，也呈现出各种各样的表现形式
5. 首先，广告不完全等同于搜索或推荐，它首先是一项商业活动，然后才是一项技术；其次，在这一商业活动中，广告主、媒体和用户的利益都需要被认真考虑和满足，这样才能达到整个市场的平衡和不断发展
### 1.1 免费模式与互联网核心资产
1. 免费模式的本质是将那些能够规模化、个性化传播信息的商品，以边际成本的价格出售
2. 当然，这些产品的共同特点是能够传播信息，并且能够对不同用户个性化地传播信息，而像矿泉水、充电器这类无法传播信息的商品，是无法被互联网的免费模式改造的
3. 这类免费产品在传播信息的过程中，获得了3项可变现的核心资产，这就是流量、数据和影响力
  + 流量
  + 数据
  + 影响力。具备影响力的产品或内容在投放广告时可以获得品牌溢价
4. 值得指出的是，近年来迅速崛起的大量网红和自媒体，实际上主要靠影响力而非流量和数据变现
5. 现有的在线广告体系并不能很好地处理这种以影响力为主要资产的媒体变现，这也是未来一个有趣的探索方向
6. 将这3项资产通过商业产品的形式转变为收入的过程，即商业化（monetization）过程，与用户使用免费产品的过程是分离的，因此称为后向变现。从上面的介绍可以看出，无论是数据变现还是影响力变现，都是建立在流量变现的基础上的，而这样的体系也就是计算广告所支撑的、现代的商业化产品体系
### 1.2 大数据与广告的关系
1. 大数据在工业界最显著的特点是区别于以往数据处理系统的低成本、分布式计算架构。从数据来源、处理方式和应用方法这3个角度来看，大数据问题都有明显的特点：
  + 行为数据。传统的数据处理任务往往面对的是交易数据。所谓交易数据指的是商业活动中必须记录的数据，如电信运营商的话费充值、通话记录，银行的存取款、利息等。交易数据处理的规模往往并不太大，但是对一致性和实时性的要求非常高。而商业活动中产生的非必须记录的数据，就是行为数据。电信运营商采集到的用户位置、银行的窗口排队以及网站的用户访问日志等，都属于行为数据。行为数据的加工有两个特点：首先是规模巨大；其次是对一致性的要求要低很多，例如，网站的日志丢失千分之一，往往并不是什么严重的事故
  + 全量加工。如果数据规模很大，并且问题无法通过采样来降低处理的复杂程度，那就必须利用一些专门为海量数据处理而设计的计算和存储技术（如MapReduce、NoSQL数据库等）。全量加工适用于以下两个类型数据：（1）通过数据采样明显降低复杂度，且效果没有明显下降；（2）无法通过处理少量数据达到处理全量数据的效果（推荐、计算广告）
  + 全自动应用。使用数据的应用有两种类型。一种是洞察（insight）应用，即对数据进行统计分析后得到整体的结果报表，再有决策者根据结果进行决策。另外一种是自动化（automation）应用，即将数据处理的结果直接送给对业务进行自动决策的引擎。计算广告正是典型的自动化应用
2. 我们认为，相对于传统的洞察应用，自动化应用才是真正发挥大数据优势的应用形态
3. 由于上述3个特点的存在，催生了Google的GFS、MapReduce和BigTable这”三驾马车“，也产生了Hadoop和Spark等开源技术方案
### 1.3 广告的定义与目的
1. 广告是由已确定的出资人通过各种媒介进行的有关产品（商品、服务和观点）的，通常是有偿的、有组织的、综合的、劝服性的非人员的信息传播活动
2. 出资人、媒体和受众这三者的利益博弈关系是广告活动的主线，这一主线将贯穿于商业和产品形态的整个演化过程。另外，该定义还阐明了广告必须是有偿的、非人员的信息传播活动，这两点限制，前者使广告的目标变得明确，后者使这一目标可以用计算的方式来优化，这些都是计算广告产生的基础
3. 传统广告的目的主要是借助媒体的力量来快速接触大量用户，以达到宣传品牌形象，提升中长期购买率与利润空间的目的。我们称这种目的的广告为品牌广告（brand awareness）。当然，也有许多广告商希望能利用广告手段马上带来大量的购买或其他转化行为，我们称这种目的的广告位直接效果广告（direct response），有时简称为效果广告
4. 传统媒体投送和优化效果广告的能力显然是缺乏的。这是因为，对短期效果的追求要求广告精准地送达目标人群，而这在传统媒体上缺乏有效的技术手段
5. 数字媒体的出现使效果广告空前蓬勃地发展起来：
  + 数字媒体的特点可以让我们低成本地投送个性化广告，这本质上是在变现流量
  + 一些在线服务，如搜索、电子商务，由于可以更清楚地了解用户的意图，也就使广告效果的优化更加容易，这本质上实在变现数据
  + 广告有品牌和效果两种目标
  + 广告的根本目的是广告主通过媒体达到低成本的用户接触
  + 按某种市场意图接触相应的人群，进而影响其中的潜在用户，使他们选择某产品的概率增加，或者对产品性价比的苛求程度降低，这才是广告的根本目的。至于短期内的转化效果，由于市场意图或媒体性质的不同，并不是直接可比的。如果仅仅以转化效果为目的来思考问题，可能会背离投放广告的正确方法论
  + 投入产出比（Return on Investment, ROI）这一评价指标是某次广告活动的总产出与总投入的比例
  + 一切付费的信息、产品或服务的传播渠道，都是广告
### 1.4 在线广告表现形式
1. 下面介绍的各种广告形式概念上有交叠，并不是并列的关系：
  + 横幅广告（banner ad）。这是展示广告中最传统的形式。它是嵌入在页面中的图片，往往需要占据固定大小的版面
  + 文字链广告（textual ad）。这种广告的素材形式是一段链接到广告主落地页的文字，是搜索广告的主流形式，在展示广告中也被广泛采用
  + 富媒体广告（rich media ad）。这类广告利用视觉冲击力较强的表现形式，向用户侵入式地投送广告素材。富媒体广告常见的形式有弹窗、对联、全屏等。它比较适合在高质量的媒体做品牌性质较强的广告投放，但是对用户的使用体验往往影响也较大
  + 视频广告（video ad）。视频广告指的是广告的创意由静态素材变成了一段视频，其信息的传播量和冲击力都得以大大提高。可以说，视频化已经成为在线广告最重要的趋势之一。有关视频广告的效果评价，除了点击率等，还可以采用用户观看时长等更接近用户印象的指标。视频广告的几种形式：
    + 在视频内容播放之前的前插片广告。根据插入位置的不同，视频广告又可以分为前插片、后插片、暂停等类型
    + 在信息流中插入的视频广告。在Wi-Fi场景下往往自动播放，其效果远优于普通的信息流展示广告（例如：抖音下滑视频会滑到的视频广告）
    + 手机游戏中的激励视频广告
  + 交互式广告（playable ad）。在移动应用和游戏推广中，交互创意可以让用户不用下载App就可以体验期内容。交互创意有两种技术方案：一是服务端交互的方案，二是HTML5模拟的方案
  + 社交广告（social ad）。社交网络的兴起给广告传播的渠道和能力都赋予了新的空间。在社交网络中嵌入广告，可以统称为社交广告。它力求在用户的交互过程中尽可能自然地插入广告，被归于原生广告的范畴中。社交广告希望达到的效果是通过用户的扩建式传播获得更大的影响力
  + 移动广告（mobile ad）。在应用中插入广告的SDK和相应的广告产品
  + 邮件营销广告（Email Direct Markting, EDM）这是通过电子邮件向用户推广信息的一种营销手段。与上面的各种广告形式都不同，EDM是一种主动营销方式，可以随时向合适的用户发送信息。对EDM的运营者而言，精准地把握用户兴趣，非常有节制地向用户提供相关信息非常重要
  + 激励广告（incentive ad）。直接激励用户产生转化以提高效果，这类广告称为激励广告。返利购买是电商行业常见的一种推广模式。特别需要注意的是，天下没有免费的午餐，激励广告虽然能显著提高转化效率，但是由于用户的真实需求并不强，因此后续效果会大打折扣，特别是在获取新客户方面的价值比较差，因此，激励广告的价格一般会显著低于非激励广告
  + 团购。团购本质上是一种按照效果付费的泛广告产品
  + 游戏联运。游戏联运是根据用户的最终游戏内消费在推广渠道和游戏开放商之间分成的商业产品，这仍然是一种按效果付费的泛广告产品。实际上，在中国各大Android应用市场，游戏联运的收入远远超过其他类型广告的收入
  + 固定位导航。这主要包括网址导航站的位置输入、应用分发平台的推荐位置等付费推广位置。一般来说，这种产品的销售都采用按时间付费的模式，而不是动态的竞价模式。这是因为广告主除了引流之外，往往更加关注那些入口位置的橱窗效应
2. 通过多种广告形式之间的竞价来决策，这是非常重要的内部流量货币化的运营理念
### 1.5 在线广告简史
1. 在互联网上展示横幅广告的产品形式为展示广告，也称显示广告。我们称上述的展示广告售卖模式为合约广告，即采用广告的方式约定某一广告位在某一时间段为特定广告主所独占，并且根据双方的要求，制定广告创意和投放策略。显然这样的采买模式并没有用到数字媒体可以对不同用户投放不同内容的个性化特征
2. 互联网广告者经过探索，很快就发现了数字媒体不同于传统媒体的本质特点：可以对不同的受众呈现不同的广告创意。实际上，这是在线广告效果和规模不断发展的核心驱动力。并因此衍生出定向广告
3. 在广告业务中，数据变现是依附在流量变现的基础上的
4. 定向广告系统对计算机技术提出了两个需求：一是受众定向（audience targeting），即通过技术手段标定某个用户的性别、年龄或其它标签，二是广告投放（ad serving），即将广告投送由直接嵌入界面变为实时响应前段请求，并动态决策和返回合适的广告创意。此时的定向广告仍然以合约的方式进行：媒体与广告主约定广告位、时间段和投放量，并在此基础上确定合同的总金额以及量未达标的情况下的赔偿方案。这种担保式投送（Guaranteed Delivered,GD）的交易方式逐渐成为互联网合约式广告的主要模式。一般来说，这样的合约仍然主要面向品牌广告主，并且按照千次展示付费（Cost per Mile,CPM）的计费方式
5. GD广告系统中有一个重要的计算问题，即保证满足各合约目标量的要求的同时，尽量为广告主分配到效果更好的流量。这个问题有两个难点：一是如何有效地将流量分配到各个合约相互交叉的人群覆盖上；二是要在在线的环境下实时地完成每一次展示的决策。这个就是在线分配（online allocation）问题。如果将各合约的量看作约束条件，将广告效果看作目标函数，则可以利用带约束优化（constrained optimization）的数学框架来解决
6. 竞价广告（auction-based advertising）。在竞价模式下，供给方只像广告主保证质即单位流量的成本，但不再给出量的保证。对于每一次展示，则按照收益最高这样简单原则来决策
7. 定向广告在”量“的约束下，最优化”质“；由于细粒度标签组合难以准确预估所导致的”质“的下降。同时，由于”量“的约束，某些广告曝光机会会给”量“需求大的广告主，导致浪费卖的更高的流量机会
8. 如何向广告主收取每次竞价费用这一点上，并不是按照微观上最优的方案实施就可以达到整个市场最大的利益。
9. 关于定价机制的深入研究，产生了广义第二高价（Generalized Second Price,GSP）这一竞价重要的理论
10. 基于竞价和准确人群定向这两个核心功能，产生了广告网络（AD Network,ADN）。它批量地运营媒体的广告位，按照人群或上下文标签售卖给需求方，并用竞价的方式分配流量。广告网络的结算方式以按点击付费（Cost per Click,CPC）的方式为主。这种产品的千次展示收益（Revenue per Mille,RPM）一般来说达不到合约广告的水平,但它使大量媒体剩余流量（remnant inventory），即没有能力通过合约售卖的流量，有了可行的变现手段：这些媒体可以直接把自己的库存（inventory）托管给ADN，借助ADN的销售和代理团队让自己的流量变现（解决长尾问题）
11. 竞价广告产生后，流量采买形式发生了变化：一是更多地面向受众而非广告位进行采买；二是越来越需要技术手段保证广告主的要求，并在此基础上优化效果
12. 因为只能在供给方定义好的标签组合上指定出家，而不能控制每一次展示的出价，市场看起来更像一个黑盒子，所以需求方只能靠选择合适的标签组合，以及阶段性调整出价来间接控制效果。这种面向多个ADN或媒体按人群一站式采买广告，并进行量和质优化的需求方产品，称为交易终端（Trading Desk,TD）
13. 广告网络的竞价过程是内部进行的，这无法满足广告主定制化的人群选择和优化要求。这样的需求催生了一种开放的竞价逻辑，让需求方按自己的人群定义来挑选流量，这就是实时竞价（Real Time Biding,RTB），它将竞价过程由广告主预先出价，变成每次展示时实时出价
14. 市场上产生了聚合各媒体流量，采用实时竞价方式进行变现的新产品形态--广告交易平台（AD Exchange,ADX）
15. 通过实时竞价，按照定制化人群标签采买广告，这样的产品就是需求方平台（Demand Side Platform,DSP）
16. 基于DSP的广告采买也叫作程序化交易（programmatic trade）
17. 将内容与广告以某种方式统一决策或展示的产品形式--原生广告（native ad）在近年来得到了越来越多的关注
18. [一图读懂在线广告产品交互关系](https://www.afenxi.com/73902.html)

![image](https://github.com/JiangRIVERS/ReadingNotes/blob/main/计算广告/计算广告交易平台交互图.jpg)
19. 广告发展史分为两条线：
+ 交易形态主线：展示广告->合约广告->竞价广告->实时竞价广告
+ 产品展示逻辑线：广告与内容相互独立->原生广告
## 第二章 计算广告基础
1. 可衡量的效果以及相应的计算优化，是在线广告有别于线下广告的主要特点
2. 计算广告的核心问题：利润优化问题的概念性框架
3. 在大多数广告产品中，可以通过计算优化的主要是收入部分，而千次展示期望收入（expected Cost per Mile,eCPM）正是计算广告中最为核心的量化指标之一
4. eCPM又可以分解为点击率和点击价值的乘积
### 2.1 广告有效性理论
1. 广告的信息接收过程分为3个大阶段，即选择（selection）、解释（interpretation）与态度（attitude），或者进一步分解为6个子阶段，即曝光（exposure）、关注（attention）、理解（comprehension）、接受（acceptence）、保持（retention）与决策（decision）。
+ 曝光阶段。这一阶段指的是广告物理上展现出来的过程，其有效程度往往与广告位的物理属性有关，并没有太多可以通过技术优化的空间。实际的广告实践中，因为曝光的有效性对最终结果的影响往往远远高于其他技术性因素，所以才会有“位置为王”的说法。
+ 关注阶段。这一阶段指的是受众从物理上接触到广告，到意识上关注到它的过程。对广告而言，曝光不一定意味着关注。强曝光并不能等同于用户有效的关注。如何提高关注阶段的效率呢？
  + 首先，尽量不要打断用户的任务。用户明确辨识出某个固定的广告位，并且不再认为它与当前网页的任务有关联时，他会下意识地屏蔽其内容
  + 其次，明确传达向用户推送此广告的原因，这一点是受众定向广告创意优化的重要方向
  + 最后，内容符合用户的兴趣或需求，这是行为定向的原理基础
+ 理解阶段。用户关注到了刚搞的内容并不意味着他一定能理解广告传达的信息。如何提高理解阶段的效率呢？
  + 首先，广告内容要在用户能理解的具体兴趣范围内
  + 其次，要注意设定与关注程度相匹配的理解门槛。例如，在电视广告中，可以用一定情节的短故事来宣传品牌；在路牌广告中，创意制作的原则是将若干主要市场诉求都表达出来；而对互联网广告，由于用户的关注程度非常低，我们应该集中强调一个主要诉求以吸引用户的注意力
+ 接受阶段。受众理解了广告传达的信息，并不表示他认可这些信息。在使用幽默、性感这样非常规的广告手段时，要特别注意这一点。广告的上下文环境对广告的接受程度有着很大的影响，同一广告出现在某游戏社区上和门户网站首页上，用户会更倾向于后者更具说服力，这也就是优质媒体的品牌价值
+ 保持阶段。对于追求长期效果的品牌广告商，当然希望广告传达的信息给用户留下鲜明的记忆，以长时间影响他的选择
+ 决策阶段。成功广告的最终作用是带来用户的转化行为，虽然这一阶段已经离开了广告的业务范围，但好的广告还是能够为转化率的提高做好铺垫的

定型地说，越靠前的阶段，其效果对点击率的影响越大；越靠后的阶段，其效果对转化率的影响越大。
### 2.2 互联网广告的技术特点
1. 在线广告不同于传统广告的特点有如下几点：
+ 技术和计算导向。数字媒体的特点使在线广告可以进行精细的受众定向，而技术又使得广告决策和交易朝着计算驱动的方向发展
+ 效果的可衡量性。点击率绝对值得比较没有那么重要，而在一个特定时期不同广告和算法表现出来的差异，才是更有意义的
+ 创意和投放方式的标准化。标准化的驱动力来自于受众定向与程序化交易。既然需求方关心的是人群而非广告位，创意尺寸的统一化与一些关键接口标准化非常关键。在PC广告市场，有越来越多的广告平台愿意根据这些标准来设计自己的产品，因为这样大家可以充分利用整个市场的流动性，更快地创造价值。不过，在移动时代，与内容表现一致的原生化需求比创意的标准化需求更加急迫。因此，移动时代的创意标准可能会有完全不同的思路
+ 媒体概念的多样化。在从需求方看在线广告时，应该注重各种性质媒体的配合关系，并从整合营销的角度去审视和优化整体效果。既注重“转化”，又注重“引导”潜在用户。试想，如果一家电商只用返利网作为线上广告渠道，ROI一定可以做到很高，但是这样的营销能够给他带来大量潜在用户吗？答案是不能。2012年底，淘宝发布声明，宣布终止与以现金形式返利的淘宝客网站的合作，正是放映了市场对此问题的认知正在趋向一致和理性
+ 数据驱动的投放决策。广泛收集用户的行为数据和广告反馈数据，利用云计算的基础设施对用户打上合适的标签，同样根据数据在多个广告竞争同一次展示时作出决策，再将投放的结果统计数据反馈给广告操作人员以调整投放策略，这已经成为在线广告的基本投放逻辑
### 2.3 计算广告的核心问题
1. Andrei Broder在提出计算广告这一课题的同时，给出了其核心研究挑战：“Find the best match between a given user in a given context and a suitable advertisement”。本书对这一表述少做加工，给出计算广告的核心问题如下：
```
计算广告的核心问题，是为一系列用户与上下文的组合找到最合适的广告投放策略以优化整体广告活动的利润
```
